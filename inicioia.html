<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>FundaTerm v0.1 — Fundamentos de Programación</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0a0f0a;
      --phosphor:#00ff9c;
      --dim:#0aff8a22;
      --ghost:#00ffaa44;
      --error:#ff4d4d;
      --accent:#66ffcc;
    }
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(ellipse at center, #000 0%, #000 40%, #020802 100%), var(--bg);
      color: var(--phosphor);
      font: 16px/1.4 "Share Tech Mono", Consolas, monospace;
      overflow:hidden;
    }

    /* CRT scanlines + subtle flicker */
    .crt:before, .crt:after{
      content:"";
      position:fixed; inset:0; pointer-events:none;
    }
    .crt:before{
      background: 
        repeating-linear-gradient(
          to bottom, rgba(0,0,0,.15), rgba(0,0,0,.15) 2px,
          rgba(0,0,0,0) 2px, rgba(0,0,0,0) 4px
        );
      mix-blend-mode: multiply;
      opacity:.9;
    }
    .crt:after{
      background: radial-gradient(circle at 50% 50%, rgba(102,255,204,.12), transparent 60%);
      animation: flicker 3.2s infinite;
    }
    @keyframes flicker{
      0%,19%,21%,23%,80%,100%{opacity:.08}
      20%,22%{opacity:.18}
      81%{opacity:.12}
    }

    .wrap{
      max-width: 980px;
      height:100%;
      margin:0 auto;
      padding: 24px 20px 40px;
      box-sizing:border-box;
      display:flex;
      flex-direction:column;
      gap:8px;
      text-shadow: 0 0 6px var(--ghost), 0 0 18px var(--dim);
      filter: saturate(1.05) contrast(1.05);
    }

    .title{
      color: var(--accent);
      letter-spacing:.08em;
    }

    .dim{ color: #9fffd9; opacity:.8 }
    .muted{ opacity:.65 }

    .panel{
      border: 1px solid var(--accent);
      box-shadow: 0 0 10px var(--dim), inset 0 0 12px #0d2;
      padding: 10px 12px;
      margin-top:8px;
    }
    .grid{
      display:grid; grid-template-columns: 1fr 1fr;
      gap:8px 24px;
    }
    .badge{
      display:inline-block;
      border:1px solid var(--accent);
      padding:2px 6px; margin-right:6px; margin-bottom:4px;
    }

    /* Terminal */
    .terminal{
      flex:1;
      overflow:auto;
      border: 1px solid var(--accent);
      box-shadow: inset 0 0 20px #093, 0 0 18px var(--dim);
      padding: 14px 14px 90px;
      background: linear-gradient(180deg, rgba(0,50,0,.08), rgba(0,0,0,.25));
    }
    .line{ white-space: pre-wrap; word-break: break-word; }
    .ok{ color: var(--accent) }
    .err{ color: var(--error) }

    .prompt{
      display:flex; align-items:center; gap:8px; margin-top:6px;
    }
    .caret{
      width: 10px; height: 1.2em; display:inline-block; background: var(--phosphor);
      animation: blink 1s steps(1) infinite;
      vertical-align: middle;
      margin-left:2px;
    }
    @keyframes blink{ 50%{opacity:0} }

    .input{ min-width: 2ch; outline:none; border:none; background:transparent; color:inherit; caret-color:transparent }
    .input::selection{ background: #0f6; color:#003300 }

    .help{
      margin-top:6px; opacity:.9
    }

    /* Glitch effect */
    .glitch{
      position:fixed; inset:0; pointer-events:none; mix-blend-mode:screen; opacity:0; 
    }
    .glitch.active{ opacity:1; animation: glitch 1450ms linear both }
    @keyframes glitch{
      0%{ clip-path: inset(0 0 0 0); filter: hue-rotate(0deg) contrast(1.1) }
      8%{ transform: skewX(6deg) }
      12%{ transform: translate3d(-6px,0,0) }
      16%{ transform: translate3d(6px,0,0) }
      20%{ transform: none }
      23%{ clip-path: inset(10% 0 0 0) }
      30%{ clip-path: inset(0 0 12% 0) }
      45%{ filter: hue-rotate(30deg) }
      60%{ filter: hue-rotate(-20deg) }
      75%{ transform: skewX(-4deg) }
      100%{ clip-path: inset(0 0 0 0); filter: hue-rotate(0deg) }
    }
    .rgb-split > *{
      position:relative;
      text-shadow:
        1px 0 0 #f00,
        -1px 0 0 #0ff,
        0 0 18px var(--ghost);
    }

    /* Mobile tweaks */
    @media (max-width: 640px){
      .grid{ grid-template-columns: 1fr; }
      .wrap{ padding:16px 12px 28px; }
    }

    /* Hide ugly focus ring for contenteditable but keep accessibility */
    .input:focus-visible { outline: none; }
    .sr-only { position:absolute; left:-9999px }
  </style>
</head>
<body class="crt">
  <div class="wrap">
    <div class="title">Coloquio v0.1 <span class="muted">/ Aprendizaje de Fundamentos de Programación</span></div>

    <div class="panel">
      <div class="grid">
        <div>
          <div class="badge">FUNDAMENTOS</div>
          <div>• Sintaxis</div>
          <div>• Abstracción</div>
          <div>• Modularidad</div>
          <div>• <span class="dim">Hola Mundo</span></div>
        </div>
        <div>
          <div class="badge">COMANDO DE INICIO</div>
          <div class="muted">Escribe <code>&gt; iniciar inteligencia_artificial</code> y presiona <strong>Enter</strong>.</div>
        </div>
      </div>
    </div>

    <div id="term" class="terminal" role="log" aria-live="polite">
      <div class="line ok">[OK] Sistema FundaTerm inicializado.</div>
      <div class="line">Bienvenido/a. Este entorno aprenderas Fundamentos de Programación.</div>
      <div class="line">Sugerencias: escribe <span class="dim">ayuda</span>, <span class="dim">hola</span> o <span class="dim">clear</span>.</div>
      <div class="line help muted">Consejo: inicia con el comando <code>iniciar inteligencia_artificial</code> para evolucionar al modo moderno.</div>

      <div class="prompt">
        <span>&gt;</span>
        <span id="input" class="input" contenteditable="true" spellcheck="false" aria-label="Entrada de comando"></span>
        <span class="caret" aria-hidden="true"></span>
      </div>
    </div>

    <div class="glitch" id="glitch">
      <!-- RGB split overlay text during glitch -->
      <div class="wrap rgb-split" style="height:100%; align-items:center; justify-content:center; display:flex">
        <div style="font-size: clamp(28px, 5vw, 48px); letter-spacing:.08em; text-align:center;">
          INICIANDO &nbsp; MÓDULO &nbsp; MODERNO…
        </div>
      </div>
    </div>

    <span class="sr-only" id="sr-beep">Sonido de tecleo activo</span>
  </div>

  <script>
    // ---------- minimal “beep” using WebAudio (no archivos externos)
    let audioCtx;
    function beep(freq=440, dur=0.02, vol=0.02){
      try{
        if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const o = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        o.type = "square"; o.frequency.value = freq;
        g.gain.value = vol;
        o.connect(g); g.connect(audioCtx.destination);
        o.start(); setTimeout(()=>{ o.stop(); }, dur*1000);
      }catch(e){}
    }

    // ---------- Terminal logic
    const term = document.getElementById('term');
    const input = document.getElementById('input');
    const glitch = document.getElementById('glitch');

    const MODERN_TARGET = 'moderno.html'; // <-- cambia el nombre si quieres otra ruta

    const helpBlock = [
`FUNDAMENTOS DISPONIBLES:
  - Sintaxis: Reglas del lenguaje. Ejemplo: "console.log('Hola Mundo')" / "print('Hola Mundo')".
  - Abstracción: Enfócate en las ideas esenciales; oculta detalles innecesarios.
  - Modularidad: Divide y vencerás: funciones, módulos, archivos.

COMANDOS:
  ayuda    : muestra este panel
  hola     : imprime "Hola Mundo"
  clear    : limpia la pantalla
  iniciar inteligencia_artificial : evoluciona al modo moderno`
    ].join('\n');

    const lessons = {
      sintaxis: `SINTAXIS
------------
La sintaxis define cómo se escribe correctamente un lenguaje de programación.
Ejemplos:
  Python  : print("Hola Mundo")
  JS      : console.log("Hola Mundo");
  C       : printf("Hola Mundo\\n");`,
      abstraccion: `ABSTRACCIÓN
-------------
Representar lo esencial y ocultar detalles.
Ejemplo: usar una función "calcular_promedio(notas)" sin saber cómo lo hace internamente.`,
      modularidad: `MODULARIDAD
------------
Separar en piezas reutilizables: funciones, módulos, paquetes.
Ejemplo: archivo "utilidades.py" con funciones que importas en otros archivos.`
    };

    function appendLine(text, cls){
      const line = document.createElement('div');
      line.className = 'line' + (cls ? ' ' + cls : '');
      line.textContent = text;
      term.insertBefore(line, term.querySelector('.prompt'));
      term.scrollTop = term.scrollHeight;
    }

    function handleCommand(cmdRaw){
      const cmd = cmdRaw.trim().replace(/^>\s*/, ''); // permite que el usuario ponga ">" al inicio
      if(!cmd) return;

      // echo
      appendLine('> ' + cmd, 'dim');

      // Comandos básicos
      if(cmd === 'clear'){ clearTerminal(); return; }
      if(cmd === 'ayuda'){ appendLine(helpBlock); return; }
      if(cmd === 'hola'){ appendLine('Hola Mundo'); return; }

      if(['sintaxis','abstraccion','abstracción','modularidad'].includes(cmd.toLowerCase())){
        const key = cmd.normalize('NFD').replace(/[\u0300-\u036f]/g,'').toLowerCase();
        appendLine(lessons[key] || lessons['sintaxis']);
        return;
      }

      // Comando principal
      if(cmd.toLowerCase() === 'iniciar inteligencia_artificial'){
        startGlitchTransition();
        return;
      }

      appendLine('Comando no reconocido. Escribe "ayuda" para ver opciones.', 'err');
    }

    function clearTerminal(){
      [...term.querySelectorAll('.line')].forEach(n => n.remove());
    }

    function startGlitchTransition(){
      appendLine('[OK] Cargando núcleo de aprendizaje…', 'ok');
      appendLine('Aplicando transición estética → terminal → moderno…', 'dim');
      glitch.classList.add('active');

      // Breve “glitch” de texto: separa colores con clase rgb-split (ya aplicada)
      // Luego redirige a la página moderna
      setTimeout(()=>{
        // Pequeña segunda fase para dramatismo
        appendLine('> handshake con interfaz moderna establecido ✓', 'ok');
      }, 700);

      // Redirección final (cámbialo si necesitas otra ruta)
      setTimeout(()=>{
        window.location.href = MODERN_TARGET;
      }, 1450);
    }

    // Manejo de input y beeps
    input.focus();
    document.addEventListener('click', ()=> input.focus());

    input.addEventListener('keydown', (e)=>{
      // simula beep al escribir (sin molestar demasiado)
      if(e.key.length === 1 && !e.ctrlKey && !e.metaKey) beep(520, 0.008, 0.01);

      if(e.key === 'Enter'){
        e.preventDefault();
        const text = input.textContent;
        input.textContent = '';
        handleCommand(text);
      } 
      // Navegación simple: flecha arriba para recuperar último comando
      else if(e.key === 'ArrowUp'){
        e.preventDefault();
        // opcional: podrías guardar historial; por simplicidad, sugerimos el comando clave:
        input.textContent = 'iniciar inteligencia_artificial';
        placeCaretAtEnd(input);
      }
    });

    function placeCaretAtEnd(el){
      const range = document.createRange();
      const sel = window.getSelection();
      range.selectNodeContents(el);
      range.collapse(false);
      sel.removeAllRanges();
      sel.addRange(range);
    }

    // Sembramos algo de contenido inicial “ochentero” con pistas
    setTimeout(()=>{
      appendLine('cat fundamentos.txt', 'dim');
      appendLine([
        '┌──────────────────────────────┐',
        '│  FUNDAMENTOS DE PROGRAMACIÓN │',
        '├──────────────────────────────┤',
        '│  • Sintaxis                  │',
        '│  • Abstracción               │',
        '│  • Modularidad               │',
        '│  • "Hola Mundo"              │',
        '└──────────────────────────────┘'
      ].join('\n'));
      appendLine('Sugerencia: escribe "sintaxis", "abstraccion", "modularidad" o "hola".', 'muted');
    }, 300);

  </script>
</body>
</html>
